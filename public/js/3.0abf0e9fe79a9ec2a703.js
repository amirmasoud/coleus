webpackJsonp([3],{"9Zd2":function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"toggleFollow"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follow"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user"},value:{kind:"Variable",name:{kind:"Name",value:"user"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:75}};n.loc.source={body:"mutation toggleFollow ($user: Int!) {\n  follow(user: $user) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach(function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(i){e(i,n)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(i){e(i,n)}),i.definitions&&i.definitions.forEach(function(i){e(i,n)})}(e,i),t[e.name.value]=i}}),e.exports=n,e.exports.toggleFollow=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var s=t[i]||new Set,o=new Set,r=new Set(s);r.size>0;){var l=r;r=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach(function(e){r.add(e)}))})}return o.forEach(function(i){var t=a(e,i);t&&n.definitions.push(t)}),n}(n,"toggleFollow")},b180:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchUserByUsername"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photo_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"xsmall"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"small"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeholder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"following_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followers_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_following"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"books_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"books"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cover"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"placeholder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:360}};n.loc.source={body:"query FetchUserByUsername($username: String) {\n  user(username: $username) {\n    id,\n    name,\n    username,\n    photo_url,\n    xsmall,\n    small,\n    placeholder,\n    following_count,\n    followers_count,\n    is_following,\n    books_count,\n    bio,\n    books {\n      id,\n      title,\n      description,\n      cover,\n      placeholder,\n      slug,\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach(function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach(function(i){e(i,n)}),i.variableDefinitions&&i.variableDefinitions.forEach(function(i){e(i,n)}),i.definitions&&i.definitions.forEach(function(i){e(i,n)})}(e,i),t[e.name.value]=i}}),e.exports=n,e.exports.FetchUserByUsername=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);for(var s=t[i]||new Set,o=new Set,r=new Set(s);r.size>0;){var l=r;r=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach(function(e){r.add(e)}))})}return o.forEach(function(i){var t=a(e,i);t&&n.definitions.push(t)}),n}(n,"FetchUserByUsername")},mr8c:function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});n("tlQw");var t=n("NYxO"),a={metaInfo:function(){return{title:this.$t("books"),meta:[{name:"description",content:this.user&&this.user.bio?this.user.bio.substring(0,300):""},{property:"og:description",content:this.user&&this.user.bio?this.user.bio.substring(0,300)+"...":"",vmid:"og:description"},{name:"twitter:description",content:this.user&&this.user.bio?this.user.bio.substring(0,300)+"...":"",vmid:"twitter:description"},{itemprop:"description",content:this.user&&this.user.bio?this.user.bio.substring(0,300)+"...":"",vmid:"description"},{property:"og:title",content:this.user?this.user.name:"",vmid:"og:title"},{name:"twitter:title",content:this.user?this.user.name:"",vmid:"twitter:title"},{itemprop:"name",content:this.user?this.user.name:"",vmid:"title"},{property:"og:image",content:this.user?this.user.small||this.user.photo_url:"",vmid:"og:image"},{name:"twitter:image",content:this.user?this.user.small||this.user.photo_url:"",vmid:"twitter:image"},{itemprop:"image",content:this.user?this.user.small||this.user.photo_url:"",vmid:"image"}]}},computed:Object(t.mapGetters)({auth:"auth/user"}),data:function(){return{user:null,username:this.$route.params.username,togglingFollow:!1}},apollo:{user:{query:n("b180"),fetchPolicy:"cache-and-network",variables:function(){return{username:this.username}}}},methods:{toggleFollow:function(){var e=this;this.togglingFollow=!0,this.$apollo.mutate({mutation:n("9Zd2"),variables:{user:this.user?this.user.id:null}}).then(function(i){e.togglingFollow=!1,e.$apollo.queries.user.refetch()})}}},s={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return e.user?n("div",[n("b-row",[n("b-col",{staticClass:"text-left"},[n("div",{staticClass:"d-flex justify-content-start"},[n("progressive-img",{staticClass:"rounded float-left img-fluid mr-4",staticStyle:{width:"64px",height:"64px"},attrs:{src:e.user.xsmall,placeholder:e.user.placeholder,fallback:e.user.photo_url,"aspect-ratio":1}}),e._v(" "),n("div",[n("h4",[e._v(" "+e._s(e.user.name))]),e._v(" "),n("small",[e._v("@"+e._s(e.user.username))])]),e._v(" "),n("div",{staticClass:"ml-3"},[!e.auth||e.auth&&e.auth.id!=e.user.id?[e.user.is_following?n("v-button",{staticClass:"px-4 btn-sm",attrs:{type:"outline-primary",block:"",loading:e.togglingFollow},nativeOn:{click:function(i){return e.toggleFollow(i)}}},[e._v("\n              "+e._s(e.$t("unfollow"))+"\n            ")]):n("v-button",{staticClass:"px-4 btn-sm",attrs:{block:"",loading:e.togglingFollow},nativeOn:{click:function(i){return e.toggleFollow(i)}}},[e._v("\n              + "+e._s(e.$t("follow"))+"\n            ")])]:n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center-new-book",modifiers:{"modal-center-new-book":!0}}],staticClass:"px-4",attrs:{size:"sm",variant:"success",block:""}},[e._v("+ "+e._s(e.$t("new_book")))])],2)],1)])],1),e._v(" "),n("div",{staticClass:"d-flex justify-content-around text-center mt-3 border-top border-bottom py-2"},[n("b-col",[e._v(e._s(e.user.books_count)),n("br"),n("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("books")))])]),e._v(" "),n("b-col",[e._v(e._s(e.user.followers_count)),n("br"),n("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("followers")))])]),e._v(" "),n("b-col",[e._v(e._s(e.user.following_count)),n("br"),n("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("following")))])])],1),e._v(" "),e.user.books&&e.user.books.length?n("b-row",{staticClass:"mt-3"},e._l(e.user.books,function(i){return n("b-col",{key:i.id,attrs:{cols:"6",sm:"4",md:"4",lg:"3",xl:"2"}},[n("b-link",{attrs:{to:{name:"books.read",params:{slug:i.slug}}}},[n("div",{staticClass:"card mb-2"},[n("progressive-img",{staticClass:"card-img-top",attrs:{src:i.cover,placeholder:i.placeholder,"aspect-ratio":1.6666666667}}),e._v(" "),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-title"},[e._v(e._s(i.title))])])],1)])],1)})):n("div",{staticClass:"text-center mt-3"},[e._v(e._s(e.$t("no_book")))])],1):n("div",{staticClass:"my-4 text-center"},[n("img",{attrs:{src:"svg-loaders/oval.svg"}})])},staticRenderFns:[]},o=n("VU/8")(a,s,!1,null,null,null);i.default=o.exports}});
//# sourceMappingURL=3.0abf0e9fe79a9ec2a703.js.map